# GeoJSON 地图编辑器 - 便携版打包指南

## 📦 方案 1：Python 便携版（推荐）

### 准备工作
1. 下载 Python Embedded 版本（无需安装）
   - 访问：https://www.python.org/downloads/windows/
   - 下载：Windows embeddable package (64-bit)
   - 例如：python-3.11.0-embed-amd64.zip

### 打包步骤

#### 1. 创建文件夹结构
```
GeoJSON地图编辑器-便携版/
├── python/                    # Python 嵌入式版本
│   ├── python.exe
│   └── ...
├── app/                       # 您的应用文件
│   ├── index.html
│   ├── script.js
│   ├── style.css
│   ├── 快速启动.html
│   └── README.md
├── 启动.bat                   # 启动脚本
└── 使用说明.txt
```

#### 2. 创建启动脚本（启动.bat）
```batch
@echo off
chcp 65001 >nul
title GeoJSON 地图编辑器

cd /d "%~dp0"
echo 正在启动地图编辑器...
echo 服务器地址: http://localhost:8000
echo.

timeout /t 1 /nobreak >nul
start http://localhost:8000/快速启动.html

cd app
..\python\python.exe -m http.server 8000
```

#### 3. 打包分发
- 将整个文件夹压缩为 ZIP
- 用户解压后直接运行"启动.bat"

---

## 🌐 方案 2：单文件 HTML 版本

### 特点
- 所有资源内联到一个 HTML 文件
- 双击即可在浏览器中打开
- 完全离线可用

### 限制
- 部分功能可能受浏览器安全限制
- 建议使用 Chrome/Edge 浏览器
- 需要允许本地文件访问

### 使用方法
1. 双击 `地图编辑器-单文件版.html`
2. 如果提示安全警告，选择"允许"
3. 开始使用

---

## 🔧 方案 3：使用 Mongoose 轻量服务器

### 下载 Mongoose
- 访问：https://github.com/cesanta/mongoose/releases
- 下载：mongoose.exe (约 500KB)

### 配置
1. 将 mongoose.exe 放在应用文件夹
2. 创建启动脚本：
```batch
@echo off
start http://localhost:8000
mongoose.exe -listening_port 8000 -document_root .
```

---

## 📋 推荐配置清单

### 最小便携包（约 15MB）
```
✓ Python Embedded (12MB)
✓ 应用文件 (3MB)
✓ 启动脚本
```

### 完整便携包（约 20MB）
```
✓ Python Embedded
✓ 应用文件
✓ 启动脚本
✓ 使用文档
✓ 示例数据
✓ Excel 模板
```

---

## 🚀 快速打包命令

### Windows PowerShell
```powershell
# 1. 下载 Python Embedded
Invoke-WebRequest -Uri "https://www.python.org/ftp/python/3.11.0/python-3.11.0-embed-amd64.zip" -OutFile "python-embed.zip"

# 2. 解压
Expand-Archive -Path "python-embed.zip" -DestinationPath "便携版/python"

# 3. 复制应用文件
Copy-Item -Path "map-app/*" -Destination "便携版/app" -Recurse

# 4. 创建启动脚本
# （手动创建或使用模板）

# 5. 打包
Compress-Archive -Path "便携版/*" -DestinationPath "GeoJSON地图编辑器-便携版.zip"
```

---

## ✅ 测试检查清单

在其他电脑上测试时，请确认：
- [ ] 解压到任意位置都能运行
- [ ] 双击启动脚本能自动打开浏览器
- [ ] 所有功能正常（绘图、导入、导出）
- [ ] Excel 导入导出正常
- [ ] GeoJSON 编辑器正常
- [ ] 地址搜索功能正常（需要网络）

---

## 🔒 注意事项

1. **Python 版本**
   - 建议使用 Python 3.9+ embedded 版本
   - 确保是 64-bit 版本（兼容性更好）

2. **防火墙**
   - 首次运行可能提示防火墙警告
   - 选择"允许访问"即可

3. **端口占用**
   - 默认使用 8000 端口
   - 如被占用，修改启动脚本中的端口号

4. **浏览器兼容性**
   - 推荐使用 Chrome、Edge、Firefox
   - IE 浏览器不支持

---

## 📞 分发建议

### 企业内部分发
- 打包为 ZIP 文件
- 附带详细使用说明
- 提供技术支持联系方式

### 公开分发
- 上传到 GitHub Releases
- 提供在线演示地址
- 编写详细的 README

---

## 🎯 下一步

您希望我帮您：
1. 创建完整的便携版打包脚本？
2. 生成单文件 HTML 版本？
3. 制作 Electron 桌面应用？

请告诉我您的选择！
